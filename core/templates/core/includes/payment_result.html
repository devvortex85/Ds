{% comment %}
  Template for displaying payment result (success or failure)
  
  Parameters:
  - title: The result card title (required)
  - success: Boolean indicating if payment was successful (required)
  - message: The main result message (required)
  - payment: The payment object (optional, for success cases)
  - error_reason: Detailed error explanation (optional, for failure cases)
  - payment_details: Dictionary of payment details for debugging (optional)
  - action_primary_link: Primary action button URL
  - action_primary_text: Primary action button text
  - action_primary_icon: Primary action icon class
  - action_primary_class: Primary button class (default: "btn-primary")
  - action_secondary_link: Secondary action button URL
  - action_secondary_text: Secondary action button text
  - action_secondary_icon: Secondary action icon class
{% endcomment %}

{% include 'core/includes/card_layout.html' with 
    title=title 
    content="
        <div class='text-center'>
            <div class='py-4'>
                {% if success %}
                    <i class='fas fa-heart fa-5x text-danger mb-3'></i>
                {% else %}
                    <i class='fas fa-times-circle fa-5x text-danger mb-3'></i>
                {% endif %}
                
                <h3>" | add:message | add:"</h3>
                
                {% if success and payment %}
                    <div class='alert alert-success my-4'>
                        <p class='lead mb-0'>
                            You donated <strong>$" | add:payment.total | add:"</strong> on 
                            " | add:payment.created_at|date:'F j, Y' | add:".
                        </p>
                    </div>
                {% endif %}
                
                {% if not success %}
                    <div class='alert alert-warning my-4'>
                        <p class='lead mb-0'>
                            Your donation could not be processed at this time.
                        </p>
                        {% if error_reason %}
                        <p class='text-danger mt-2'>
                            <strong>Error reason:</strong> " | add:error_reason | add:"
                        </p>
                        {% endif %}
                    </div>
                    
                    <p>
                        This could be due to one of the following reasons:
                    </p>
                    
                    <ul class='list-group list-group-flush mb-4'>
                        <li class='list-group-item'>Insufficient funds in your account</li>
                        <li class='list-group-item'>Card information entered incorrectly</li>
                        <li class='list-group-item'>Your bank declined the transaction</li>
                        <li class='list-group-item'>Technical issues with our payment processor</li>
                    </ul>
                {% endif %}
                
                {% if success %}
                <p class='text-muted'>
                    Your generosity helps keep our community thriving. We're committed to making 
                    Discuss the best discussion platform possible with your support.
                </p>
                {% endif %}
            </div>

            {% include 'core/includes/action_buttons.html' with 
                primary_link=action_primary_link primary_text=action_primary_text primary_icon=action_primary_icon 
                primary_class=action_primary_class|default:'btn-primary'
                secondary_link=action_secondary_link secondary_text=action_secondary_text 
                secondary_icon=action_secondary_icon %}
        </div>
    "
    header_class=success|yesno:'bg-success text-white,bg-danger text-white'
    card_class="shadow" %}