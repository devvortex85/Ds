/*
 * Universal Adaptive Styling
 * This file applies adaptive sizing to ALL elements across the entire site
 * It uses !important flags to ensure these styles take precedence
 */

/* Universal sizing for ALL elements */
* {
    transition: all 0.2s ease-in-out !important;
}

/* ===== TEXT SIZING FOR ALL ELEMENTS ===== */
/* Headings */
h1, .h1, 
.page-title,
.main-title,
.section-title-xl,
.post-title-xl {
    font-size: calc(1.5rem * var(--adaptive-scale)) !important;
    line-height: 1.3 !important;
    margin-bottom: calc(0.75rem * var(--adaptive-scale)) !important;
    font-weight: 700 !important;
}

h2, .h2,
.article-title,
.community-title,
.profile-name,
.post-title,
.section-title-lg,
.post-title-lg,
.card-header h2 {
    font-size: calc(1.3rem * var(--adaptive-scale)) !important;
    line-height: 1.3 !important;
    margin-bottom: calc(0.5rem * var(--adaptive-scale)) !important;
    font-weight: 600 !important;
}

h3, .h3, 
.card-title,
.subtitle,
.section-title-md,
.post-title-md {
    font-size: calc(1.15rem * var(--adaptive-scale)) !important;
    line-height: 1.4 !important;
    margin-bottom: calc(0.5rem * var(--adaptive-scale)) !important;
    font-weight: 600 !important;
}

h4, .h4, 
h5, .h5, 
h6, .h6,
.panel-title,
.section-title-sm,
.post-title-sm {
    font-size: calc(1rem * var(--adaptive-scale)) !important;
    line-height: 1.4 !important;
    margin-bottom: calc(0.5rem * var(--adaptive-scale)) !important;
    font-weight: 600 !important;
}

/* Body text - Force adaptive sizing on ALL text elements but only margin-bottom on block elements */
p, 
.text,
.body-text,
.card-text,
li:not(.nav-item):not(.list-group-item),
td, 
th,
blockquote,
.content,
.post-body,
.comment-body,
.post-content,
.comment-content,
.post-text,
.comment-text,
.markdown-content,
.content-text,
article,
div,
span,
label,
a,
strong,
em,
u,
b,
i,
.text-dark,
.text-light,
.text-primary,
.text-secondary,
.text-success,
.text-danger,
.text-warning,
.text-info {
    font-size: calc(1rem * var(--adaptive-scale)) !important;
    line-height: 1.5 !important;
}

/* Only add margin-bottom to block-level elements */
p, 
.text,
.body-text,
.card-text,
li:not(.nav-item):not(.list-group-item),
blockquote,
.content,
.post-body,
.comment-body,
.post-content,
.comment-content,
.post-text,
.comment-text,
.markdown-content,
.content-text,
article {
    margin-bottom: calc(0.75rem * var(--adaptive-scale)) !important;
}

/* Meta text */
small, 
.small,
.meta-text,
.post-meta,
.comment-meta,
.post-info,
.comment-info,
.post-details,
.text-muted,
.card-subtitle,
.submission-info,
.timestamp,
.date,
.author,
.community-name,
.text-sm,
.meta-info,
.help-text,
.form-text,
.text-secondary,
figcaption,
.caption {
    font-size: calc(0.85rem * var(--adaptive-scale)) !important;
    line-height: 1.4 !important;
    margin-bottom: calc(0.5rem * var(--adaptive-scale)) !important;
}

/* Extra small text */
.text-xs,
.very-small,
.caption-sm,
.footnote,
.meta-xs,
sup, 
sub {
    font-size: calc(0.75rem * var(--adaptive-scale)) !important;
    line-height: 1.3 !important;
}

/* Specific link styling */
a:not(.post-title),
.link,
.community-link,
.comment-author,
a:not(.btn):not(.nav-link):not(.dropdown-item):not(.navbar-brand):not(.post-title),
header a:not(.post-title),
footer a:not(.post-title),
.card a:not(.post-title),
.post-item a:not(.post-title),
.comment-item a:not(.post-title) {
    font-size: inherit !important;
    transition: all 0.2s ease-in-out !important;
    color: #5bc0de !important;
    text-decoration: none !important;
}

a:not(.post-title):hover,
.link:hover,
.community-link:hover,
.comment-author:hover,
a:not(.btn):not(.nav-link):not(.dropdown-item):not(.navbar-brand):not(.post-title):hover {
    color: #31b0d5 !important;
    text-decoration: underline !important;
}

/* Maintain proper styling for post titles */
a.post-title {
    font-size: inherit !important;
    transition: all 0.2s ease-in-out !important;
    color: #ffffff !important; /* Keep post titles white */
    text-decoration: none !important;
}

a.post-title:hover {
    color: #5bc0de !important; /* On hover, use theme color */
    text-decoration: none !important;
}

/* ===== FORM ELEMENTS ===== */
/* All form controls */
input:not([type="checkbox"]):not([type="radio"]),
textarea,
select,
.form-control,
.form-select,
.form-input,
.form-textarea,
.input-group,
.form-group input,
.form-group textarea,
.form-group select {
    font-size: calc(0.9rem * var(--adaptive-scale)) !important;
    line-height: 1.5 !important;
    padding: calc(0.4rem * var(--adaptive-scale)) calc(0.6rem * var(--adaptive-scale)) !important;
    min-height: calc(38px * var(--adaptive-scale)) !important;
    border-radius: calc(0.25rem * var(--adaptive-scale)) !important;
    background-color: #2c2c2c !important;
    border: 1px solid #444 !important;
    color: #f8f9fa !important;
}

/* Textareas */
textarea,
.form-textarea,
.comment-form textarea,
.post-form textarea,
.profile-form textarea {
    min-height: calc(80px * var(--adaptive-scale)) !important;
}

/* Form labels */
label,
.form-label,
legend,
.label {
    font-size: calc(0.9rem * var(--adaptive-scale)) !important;
    font-weight: 500 !important;
    margin-bottom: calc(0.3rem * var(--adaptive-scale)) !important;
    color: #e9ecef !important;
}

/* Form helper text */
.form-text,
.form-helper,
.help-text,
.helper,
.hint,
.form-hint,
.validation-message,
.invalid-feedback,
.valid-feedback {
    font-size: calc(0.8rem * var(--adaptive-scale)) !important;
    margin-top: calc(0.25rem * var(--adaptive-scale)) !important;
}

/* Form layout */
.form-group,
.mb-3,
.form-row,
.input-group {
    margin-bottom: calc(1rem * var(--adaptive-scale)) !important;
}

/* ===== BUTTONS & INTERACTIVE ELEMENTS ===== */
/* All buttons */
.btn,
button:not(.close):not([aria-label="Close"]),
input[type="button"],
input[type="submit"],
input[type="reset"],
.action-btn,
a.btn,
.nav-btn {
    font-size: calc(0.9rem * var(--adaptive-scale)) !important;
    padding: calc(0.375rem * var(--adaptive-scale)) calc(0.75rem * var(--adaptive-scale)) !important;
    border-radius: calc(0.25rem * var(--adaptive-scale)) !important;
    min-height: calc(38px * var(--adaptive-scale)) !important;
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
}

/* Small buttons */
.btn-sm,
.btn-small,
button.small,
.action-btn-sm,
a.btn-sm,
.comment-btn,
.reply-btn,
.share-btn,
.action-link,
.nav-btn-sm,
.btn-outline-secondary,
.btn-outline-danger,
.btn-outline-primary,
.btn-group .btn,
.dropdown-toggle,
.post-actions .btn,
.post-actions .btn-group .btn {
    font-size: calc(0.8rem * var(--adaptive-scale)) !important;
    padding: calc(0.25rem * var(--adaptive-scale)) calc(0.5rem * var(--adaptive-scale)) !important;
    min-height: calc(32px * var(--adaptive-scale)) !important;
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
}

/* Large buttons */
.btn-lg,
.btn-large,
button.large,
.action-btn-lg,
a.btn-lg,
.main-action-btn,
.nav-btn-lg {
    font-size: calc(1.1rem * var(--adaptive-scale)) !important;
    padding: calc(0.5rem * var(--adaptive-scale)) calc(1rem * var(--adaptive-scale)) !important;
    min-height: calc(48px * var(--adaptive-scale)) !important;
}

/* Links */
a:not(.btn):not(.nav-link):not(.dropdown-item):not(.navbar-brand),
.link {
    padding: calc(0.1rem * var(--adaptive-scale)) 0 !important;
}

/* Icons inside buttons */
.btn i,
button i,
.action-btn i,
.nav-btn i,
.btn .bi,
.btn .fa,
.btn .fas,
.btn .far,
.btn-sm i,
.btn-lg i {
    font-size: calc(1em * 1.1) !important;
    margin-right: calc(0.25rem * var(--adaptive-scale)) !important;
}

/* ===== LAYOUT & SPACING ===== */
/* Cards */
.card,
.post-card,
.comment-card,
.profile-card,
.community-card,
.panel,
.block,
.content-box {
    margin-bottom: calc(1rem * var(--adaptive-scale)) !important;
    border-radius: calc(0.25rem * var(--adaptive-scale)) !important;
}

.card-body,
.card-content,
.panel-body,
.block-content,
.content-box-body {
    padding: calc(1rem * var(--adaptive-scale)) !important;
}

.card-header,
.card-title-area,
.panel-header,
.block-header,
.content-box-header {
    padding: calc(0.75rem * var(--adaptive-scale)) calc(1rem * var(--adaptive-scale)) !important;
}

.card-footer,
.card-actions,
.panel-footer,
.block-footer,
.content-box-footer {
    padding: calc(0.75rem * var(--adaptive-scale)) calc(1rem * var(--adaptive-scale)) !important;
}

/* Containers */
.container,
.container-fluid,
.container-sm,
.container-md,
.container-lg,
.container-xl,
.container-xxl {
    padding-left: calc(1rem * var(--adaptive-scale)) !important;
    padding-right: calc(1rem * var(--adaptive-scale)) !important;
}

/* Margins & Padding */
.m-1, .mt-1, .my-1 { margin-top: calc(0.25rem * var(--adaptive-scale)) !important; }
.m-1, .mb-1, .my-1 { margin-bottom: calc(0.25rem * var(--adaptive-scale)) !important; }
.m-1, .ml-1, .ms-1, .mx-1 { margin-left: calc(0.25rem * var(--adaptive-scale)) !important; }
.m-1, .mr-1, .me-1, .mx-1 { margin-right: calc(0.25rem * var(--adaptive-scale)) !important; }

.m-2, .mt-2, .my-2 { margin-top: calc(0.5rem * var(--adaptive-scale)) !important; }
.m-2, .mb-2, .my-2 { margin-bottom: calc(0.5rem * var(--adaptive-scale)) !important; }
.m-2, .ml-2, .ms-2, .mx-2 { margin-left: calc(0.5rem * var(--adaptive-scale)) !important; }
.m-2, .mr-2, .me-2, .mx-2 { margin-right: calc(0.5rem * var(--adaptive-scale)) !important; }

.m-3, .mt-3, .my-3 { margin-top: calc(1rem * var(--adaptive-scale)) !important; }
.m-3, .mb-3, .my-3 { margin-bottom: calc(1rem * var(--adaptive-scale)) !important; }
.m-3, .ml-3, .ms-3, .mx-3 { margin-left: calc(1rem * var(--adaptive-scale)) !important; }
.m-3, .mr-3, .me-3, .mx-3 { margin-right: calc(1rem * var(--adaptive-scale)) !important; }

.m-4, .mt-4, .my-4 { margin-top: calc(1.5rem * var(--adaptive-scale)) !important; }
.m-4, .mb-4, .my-4 { margin-bottom: calc(1.5rem * var(--adaptive-scale)) !important; }
.m-4, .ml-4, .ms-4, .mx-4 { margin-left: calc(1.5rem * var(--adaptive-scale)) !important; }
.m-4, .mr-4, .me-4, .mx-4 { margin-right: calc(1.5rem * var(--adaptive-scale)) !important; }

.m-5, .mt-5, .my-5 { margin-top: calc(3rem * var(--adaptive-scale)) !important; }
.m-5, .mb-5, .my-5 { margin-bottom: calc(3rem * var(--adaptive-scale)) !important; }
.m-5, .ml-5, .ms-5, .mx-5 { margin-left: calc(3rem * var(--adaptive-scale)) !important; }
.m-5, .mr-5, .me-5, .mx-5 { margin-right: calc(3rem * var(--adaptive-scale)) !important; }

.p-1, .pt-1, .py-1 { padding-top: calc(0.25rem * var(--adaptive-scale)) !important; }
.p-1, .pb-1, .py-1 { padding-bottom: calc(0.25rem * var(--adaptive-scale)) !important; }
.p-1, .pl-1, .ps-1, .px-1 { padding-left: calc(0.25rem * var(--adaptive-scale)) !important; }
.p-1, .pr-1, .pe-1, .px-1 { padding-right: calc(0.25rem * var(--adaptive-scale)) !important; }

.p-2, .pt-2, .py-2 { padding-top: calc(0.5rem * var(--adaptive-scale)) !important; }
.p-2, .pb-2, .py-2 { padding-bottom: calc(0.5rem * var(--adaptive-scale)) !important; }
.p-2, .pl-2, .ps-2, .px-2 { padding-left: calc(0.5rem * var(--adaptive-scale)) !important; }
.p-2, .pr-2, .pe-2, .px-2 { padding-right: calc(0.5rem * var(--adaptive-scale)) !important; }

.p-3, .pt-3, .py-3 { padding-top: calc(1rem * var(--adaptive-scale)) !important; }
.p-3, .pb-3, .py-3 { padding-bottom: calc(1rem * var(--adaptive-scale)) !important; }
.p-3, .pl-3, .ps-3, .px-3 { padding-left: calc(1rem * var(--adaptive-scale)) !important; }
.p-3, .pr-3, .pe-3, .px-3 { padding-right: calc(1rem * var(--adaptive-scale)) !important; }

.p-4, .pt-4, .py-4 { padding-top: calc(1.5rem * var(--adaptive-scale)) !important; }
.p-4, .pb-4, .py-4 { padding-bottom: calc(1.5rem * var(--adaptive-scale)) !important; }
.p-4, .pl-4, .ps-4, .px-4 { padding-left: calc(1.5rem * var(--adaptive-scale)) !important; }
.p-4, .pr-4, .pe-4, .px-4 { padding-right: calc(1.5rem * var(--adaptive-scale)) !important; }

.p-5, .pt-5, .py-5 { padding-top: calc(3rem * var(--adaptive-scale)) !important; }
.p-5, .pb-5, .py-5 { padding-bottom: calc(3rem * var(--adaptive-scale)) !important; }
.p-5, .pl-5, .ps-5, .px-5 { padding-left: calc(3rem * var(--adaptive-scale)) !important; }
.p-5, .pr-5, .pe-5, .px-5 { padding-right: calc(3rem * var(--adaptive-scale)) !important; }

/* Grid system */
.row {
    margin-left: calc(-0.5rem * var(--adaptive-scale)) !important;
    margin-right: calc(-0.5rem * var(--adaptive-scale)) !important;
}

.col, [class*="col-"] {
    padding-left: calc(0.5rem * var(--adaptive-scale)) !important;
    padding-right: calc(0.5rem * var(--adaptive-scale)) !important;
}

/* ===== NAVIGATION ===== */
.navbar {
    padding: calc(0.5rem * var(--adaptive-scale)) calc(1rem * var(--adaptive-scale)) !important;
}

.navbar-brand {
    font-size: calc(1.25rem * var(--adaptive-scale)) !important;
    padding-top: calc(0.3125rem * var(--adaptive-scale)) !important;
    padding-bottom: calc(0.3125rem * var(--adaptive-scale)) !important;
}

.nav-link,
.navbar-nav .nav-link {
    padding: calc(0.5rem * var(--adaptive-scale)) calc(1rem * var(--adaptive-scale)) !important;
    font-size: calc(0.9rem * var(--adaptive-scale)) !important;
}

.dropdown-menu {
    padding: calc(0.5rem * var(--adaptive-scale)) 0 !important;
}

.dropdown-item {
    padding: calc(0.25rem * var(--adaptive-scale)) calc(1.5rem * var(--adaptive-scale)) !important;
    font-size: calc(0.9rem * var(--adaptive-scale)) !important;
}

/* ===== SPECIAL ELEMENTS ===== */
/* Tags and badges */
.badge,
.tag,
.label-tag,
.category-badge {
    font-size: calc(0.75rem * var(--adaptive-scale)) !important;
    padding: calc(0.25em * var(--adaptive-scale)) calc(0.5em * var(--adaptive-scale)) !important;
    border-radius: calc(0.25rem * var(--adaptive-scale)) !important;
}

/* Avatars and images */
.avatar,
.user-avatar,
.profile-avatar,
img.rounded-circle,
.user-img,
.avatar img,
.user-avatar img,
.profile-avatar img,
.rounded-circle img {
    object-fit: cover !important;
    border-radius: 0 !important; /* Square avatars everywhere */
    aspect-ratio: 1/1 !important; /* Force square ratio */
}

.avatar-xs,
.user-avatar-xs {
    width: calc(24px * var(--adaptive-scale)) !important;
    height: calc(24px * var(--adaptive-scale)) !important;
}

.avatar-sm,
.user-avatar-sm,
.comment-avatar {
    width: calc(32px * var(--adaptive-scale)) !important;
    height: calc(32px * var(--adaptive-scale)) !important;
}

.avatar-md,
.user-avatar-md,
.post-avatar {
    width: calc(48px * var(--adaptive-scale)) !important;
    height: calc(48px * var(--adaptive-scale)) !important;
}

.avatar-lg,
.user-avatar-lg,
.profile-avatar {
    width: calc(96px * var(--adaptive-scale)) !important;
    height: calc(96px * var(--adaptive-scale)) !important;
}

.avatar-xl,
.user-avatar-xl {
    width: calc(128px * var(--adaptive-scale)) !important;
    height: calc(128px * var(--adaptive-scale)) !important;
}

/* Country flags */
.flag,
.country-flag {
    vertical-align: middle !important;
}

.flag-xs,
.country-flag-xs {
    width: calc(16px * var(--adaptive-scale)) !important;
    height: calc(10px * var(--adaptive-scale)) !important;
}

.flag-sm,
.country-flag-sm {
    width: calc(20px * var(--adaptive-scale)) !important;
    height: calc(13px * var(--adaptive-scale)) !important;
}

.flag-md,
.country-flag-md {
    width: calc(24px * var(--adaptive-scale)) !important;
    height: calc(16px * var(--adaptive-scale)) !important;
}

/* Icons */
.icon,
.icon-sm,
.icon-md,
.icon-lg,
.bi,
.fa,
.fas,
.far,
.fab {
    vertical-align: middle !important;
}

.icon-sm,
.bi-sm,
.fa-sm {
    font-size: calc(0.85em * var(--adaptive-scale)) !important;
}

.icon-md,
.bi-md,
.fa-md {
    font-size: calc(1em * var(--adaptive-scale)) !important;
}

.icon-lg,
.bi-lg,
.fa-lg {
    font-size: calc(1.25em * var(--adaptive-scale)) !important;
}

/* Voting controls */
.vote-column,
.vote-controls {
    margin-right: calc(0.5rem * var(--adaptive-scale)) !important;
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
}

.vote-btn {
    width: calc(32px * var(--adaptive-scale)) !important;
    height: calc(32px * var(--adaptive-scale)) !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
}

.vote-count {
    font-size: calc(0.9rem * var(--adaptive-scale)) !important;
    font-weight: 600 !important;
    margin: calc(0.25rem * var(--adaptive-scale)) 0 !important;
}

/* Lists & Tables */
.list-group-item {
    padding: calc(0.75rem * var(--adaptive-scale)) calc(1.25rem * var(--adaptive-scale)) !important;
}

.table th,
.table td {
    padding: calc(0.75rem * var(--adaptive-scale)) !important;
}

/* ===== MEDIA QUERIES FOR SPECIFIC DEVICE TYPES ===== */
/* Mobile Phones */
@media (max-width: 575.98px) {
    :root {
        --adaptive-scale: 0.85;
    }
    
    /* Further optimization for really small screens */
    @media (max-width: 360px) {
        :root {
            --adaptive-scale: 0.8;
        }
    }
    
    /* Post actions buttons on mobile */
    .post-actions .btn,
    .post-actions .btn-group .btn,
    .post-actions .btn-sm,
    .post-actions .btn-outline-primary,
    .post-actions .btn-outline-secondary,
    .post-actions .btn-outline-danger {
        font-size: 0.75rem !important;
        padding: 0.1rem 0.3rem !important;
        min-height: 24px !important;
        display: inline-flex !important;
        align-items: center !important;
        justify-content: center !important;
    }
    
    /* Icons inside buttons on mobile */
    .post-actions .btn i,
    .post-actions .btn .bi {
        font-size: 0.85rem !important;
        margin-right: 0.1rem !important;
    }
}

/* Tablets */
@media (min-width: 576px) and (max-width: 991.98px) {
    :root {
        --adaptive-scale: 0.92;
    }
}

/* Desktops */
@media (min-width: 992px) and (max-width: 1399.98px) {
    :root {
        --adaptive-scale: 1;
    }
}

/* Large Desktops */
@media (min-width: 1400px) {
    :root {
        --adaptive-scale: 1.1;
    }
}