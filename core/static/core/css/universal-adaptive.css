/*
 * Universal Adaptive Styling
 * This file applies adaptive styling to ALL elements across the entire site
 * - Includes accessibility features
 * - Includes flag and avatar fixes
 * - Includes responsive design adjustments
 * - Includes adaptive sizing variables and classes
 * - Includes voting controls
 * - Includes navbar and interfaces
 * 
 * It uses !important flags to ensure these styles take precedence
 */

/* Universal sizing for ALL elements */
* {
    transition: all 0.2s ease-in-out !important;
}

/* ===== ADAPTIVE SIZING FOUNDATION ===== */
/* Base adaptive variables - also set in JS for dynamic updates */
:root {
    --adaptive-scale: 1;
    --mobile-scale: 0.85;
    --tablet-scale: 0.92;
    --desktop-scale: 1;
    --large-desktop-scale: 1.1;
    
    /* Spacing variables */
    --base-spacing: calc(0.5rem * var(--adaptive-scale));
    --spacing-xs: calc(0.25rem * var(--adaptive-scale));
    --spacing-sm: calc(0.5rem * var(--adaptive-scale));
    --spacing-md: calc(1rem * var(--adaptive-scale));
    --spacing-lg: calc(1.5rem * var(--adaptive-scale));
    --spacing-xl: calc(2rem * var(--adaptive-scale));
    
    /* Typography variables */
    --font-size-xs: calc(0.7rem * var(--adaptive-scale));
    --font-size-sm: calc(0.85rem * var(--adaptive-scale));
    --font-size-md: calc(1rem * var(--adaptive-scale));
    --font-size-lg: calc(1.25rem * var(--adaptive-scale));
    --font-size-xl: calc(1.5rem * var(--adaptive-scale));
    
    /* Form element sizes */
    --input-height: calc(38px * var(--adaptive-scale));
    --input-font-size: calc(0.9rem * var(--adaptive-scale));
    --input-padding: calc(0.4rem * var(--adaptive-scale)) calc(0.6rem * var(--adaptive-scale));
    --textarea-height: calc(80px * var(--adaptive-scale));
    --label-font-size: calc(0.9rem * var(--adaptive-scale));
    --helper-font-size: calc(0.85rem * var(--adaptive-scale));
    
    /* Post and content sizes */
    --post-title-size: calc(1.4rem * var(--adaptive-scale));
    --post-meta-size: calc(0.85rem * var(--adaptive-scale));
    --post-content-size: calc(1rem * var(--adaptive-scale));
    --comment-content-size: calc(0.95rem * var(--adaptive-scale));
    --comment-meta-size: calc(0.8rem * var(--adaptive-scale));
    
    /* Components sizes */
    --icon-size-xs: calc(0.7rem * var(--adaptive-scale));
    --icon-size-sm: calc(0.9rem * var(--adaptive-scale));
    --icon-size-md: calc(1.1rem * var(--adaptive-scale));
    --icon-size-lg: calc(1.3rem * var(--adaptive-scale));
    
    /* Touch targets */
    --touch-target-size: calc(44px * var(--adaptive-scale));
    --min-touch-target: calc(32px * var(--adaptive-scale));
    
    /* Tag and badge sizes */
    --tag-font-size-xs: calc(0.65rem * var(--adaptive-scale));
    --tag-font-size-sm: calc(0.75rem * var(--adaptive-scale));
    --tag-font-size-md: calc(0.8rem * var(--adaptive-scale));
    --tag-padding-xs: calc(0.15rem * var(--adaptive-scale)) calc(0.3rem * var(--adaptive-scale));
    --tag-padding-sm: calc(0.2rem * var(--adaptive-scale)) calc(0.4rem * var(--adaptive-scale));
    --tag-padding-md: calc(0.25rem * var(--adaptive-scale)) calc(0.5rem * var(--adaptive-scale));
    
    /* Button and control sizes */
    --btn-padding-xs: calc(0.15rem * var(--adaptive-scale)) calc(0.3rem * var(--adaptive-scale));
    --btn-padding-sm: calc(0.25rem * var(--adaptive-scale)) calc(0.5rem * var(--adaptive-scale));
    --btn-padding-md: calc(0.375rem * var(--adaptive-scale)) calc(0.75rem * var(--adaptive-scale));
    --btn-padding-lg: calc(0.5rem * var(--adaptive-scale)) calc(1rem * var(--adaptive-scale));
    
    /* Flag sizes */
    --flag-width-mobile: calc(16px * var(--adaptive-scale));
    --flag-height-mobile: calc(10px * var(--adaptive-scale));
    --flag-width-tablet: calc(18px * var(--adaptive-scale));
    --flag-height-tablet: calc(12px * var(--adaptive-scale));
    --flag-width-desktop: calc(20px * var(--adaptive-scale));
    --flag-height-desktop: calc(13px * var(--adaptive-scale));
    
    /* Vote control sizes */
    --vote-btn-size-mobile: calc(28px * var(--adaptive-scale));
    --vote-btn-size-tablet: calc(32px * var(--adaptive-scale));
    --vote-btn-size-desktop: calc(36px * var(--adaptive-scale));
    --vote-icon-size-mobile: calc(1.2rem * var(--adaptive-scale));
    --vote-icon-size-tablet: calc(1.4rem * var(--adaptive-scale));
    --vote-icon-size-desktop: calc(1.5rem * var(--adaptive-scale));
}

/* ===== TEXT SIZING FOR ALL ELEMENTS ===== */
/* Headings */
h1, .h1, 
.page-title,
.main-title,
.section-title-xl,
.post-title-xl {
    font-size: calc(1.5rem * var(--adaptive-scale)) !important;
    line-height: 1.3 !important;
    margin-bottom: calc(0.75rem * var(--adaptive-scale)) !important;
    font-weight: 700 !important;
}

h2, .h2,
.article-title,
.community-title,
.profile-name,
.post-title,
.section-title-lg,
.post-title-lg,
.card-header h2 {
    font-size: calc(1.3rem * var(--adaptive-scale)) !important;
    line-height: 1.3 !important;
    margin-bottom: calc(0.5rem * var(--adaptive-scale)) !important;
    font-weight: 600 !important;
}

h3, .h3, 
.card-title,
.subtitle,
.section-title-md,
.post-title-md {
    font-size: calc(1.15rem * var(--adaptive-scale)) !important;
    line-height: 1.4 !important;
    margin-bottom: calc(0.5rem * var(--adaptive-scale)) !important;
    font-weight: 600 !important;
}

h4, .h4, 
h5, .h5, 
h6, .h6,
.panel-title,
.section-title-sm,
.post-title-sm {
    font-size: calc(1rem * var(--adaptive-scale)) !important;
    line-height: 1.4 !important;
    margin-bottom: calc(0.5rem * var(--adaptive-scale)) !important;
    font-weight: 600 !important;
}

/* Body text - Force adaptive sizing on ALL text elements but only margin-bottom on block elements */
p, 
.text,
.body-text,
.card-text,
li:not(.nav-item):not(.list-group-item),
td, 
th,
blockquote,
.content,
.post-body,
.comment-body,
.post-content,
.comment-content,
.post-text,
.comment-text,
.markdown-content,
.content-text,
article,
div,
span,
label,
a,
strong,
em,
u,
b,
i,
.text-dark,
.text-light,
.text-primary,
.text-secondary,
.text-success,
.text-danger,
.text-warning,
.text-info {
    font-size: calc(1rem * var(--adaptive-scale)) !important;
    line-height: 1.5 !important;
}

/* Only add margin-bottom to block-level elements */
p, 
.text,
.body-text,
.card-text,
li:not(.nav-item):not(.list-group-item),
blockquote,
.content,
.post-body,
.comment-body,
.post-content,
.comment-content,
.post-text,
.comment-text,
.markdown-content,
.content-text,
article {
    margin-bottom: calc(0.75rem * var(--adaptive-scale)) !important;
}

/* Meta text */
small, 
.small,
.meta-text,
.post-meta,
.comment-meta,
.post-info,
.comment-info,
.post-details,
.text-muted,
.card-subtitle,
.submission-info,
.timestamp,
.date,
.author,
.community-name,
.text-sm,
.meta-info,
.help-text,
.form-text,
.text-secondary,
figcaption,
.caption {
    font-size: calc(0.85rem * var(--adaptive-scale)) !important;
    line-height: 1.4 !important;
    margin-bottom: calc(0.5rem * var(--adaptive-scale)) !important;
}

/* Extra small text */
.text-xs,
.very-small,
.caption-sm,
.footnote,
.meta-xs,
sup, 
sub {
    font-size: calc(0.75rem * var(--adaptive-scale)) !important;
    line-height: 1.3 !important;
}

/* Specific link styling */
a:not(.post-title),
.link,
.community-link,
.comment-author,
a:not(.btn):not(.nav-link):not(.dropdown-item):not(.navbar-brand):not(.post-title),
header a:not(.post-title),
footer a:not(.post-title),
.card a:not(.post-title),
.post-item a:not(.post-title),
.comment-item a:not(.post-title) {
    font-size: inherit !important;
    transition: all 0.2s ease-in-out !important;
    color: #5bc0de !important;
    text-decoration: none !important;
}

a:not(.post-title):hover,
.link:hover,
.community-link:hover,
.comment-author:hover,
a:not(.btn):not(.nav-link):not(.dropdown-item):not(.navbar-brand):not(.post-title):hover {
    color: #31b0d5 !important;
    text-decoration: underline !important;
}

/* Maintain proper styling for post titles */
a.post-title {
    font-size: inherit !important;
    transition: all 0.2s ease-in-out !important;
    color: #ffffff !important; /* Keep post titles white */
    text-decoration: none !important;
}

a.post-title:hover {
    color: #5bc0de !important; /* On hover, use theme color */
    text-decoration: none !important;
}

/* ===== FORM ELEMENTS ===== */
/* All form controls */
input:not([type="checkbox"]):not([type="radio"]),
textarea,
select,
.form-control,
.form-select,
.form-input,
.form-textarea,
.input-group,
.form-group input,
.form-group textarea,
.form-group select {
    font-size: calc(0.9rem * var(--adaptive-scale)) !important;
    line-height: 1.5 !important;
    padding: calc(0.4rem * var(--adaptive-scale)) calc(0.6rem * var(--adaptive-scale)) !important;
    min-height: calc(38px * var(--adaptive-scale)) !important;
    border-radius: calc(0.25rem * var(--adaptive-scale)) !important;
    background-color: #2c2c2c !important;
    border: 1px solid #444 !important;
    color: #f8f9fa !important;
}

/* Textareas */
textarea,
.form-textarea,
.comment-form textarea,
.post-form textarea,
.profile-form textarea {
    min-height: calc(80px * var(--adaptive-scale)) !important;
}

/* Form labels */
label,
.form-label,
legend,
.label {
    font-size: calc(0.9rem * var(--adaptive-scale)) !important;
    font-weight: 500 !important;
    margin-bottom: calc(0.3rem * var(--adaptive-scale)) !important;
    color: #e9ecef !important;
}

/* Form helper text */
.form-text,
.form-helper,
.help-text,
.helper,
.hint,
.form-hint,
.validation-message,
.invalid-feedback,
.valid-feedback {
    font-size: calc(0.8rem * var(--adaptive-scale)) !important;
    margin-top: calc(0.25rem * var(--adaptive-scale)) !important;
}

/* Form layout */
.form-group,
.mb-3,
.form-row,
.input-group {
    margin-bottom: calc(1rem * var(--adaptive-scale)) !important;
}

/* ===== BUTTONS & INTERACTIVE ELEMENTS ===== */
/* All buttons */
.btn,
button:not(.close):not([aria-label="Close"]),
input[type="button"],
input[type="submit"],
input[type="reset"],
.action-btn,
a.btn,
.nav-btn {
    font-size: calc(0.9rem * var(--adaptive-scale)) !important;
    padding: calc(0.375rem * var(--adaptive-scale)) calc(0.75rem * var(--adaptive-scale)) !important;
    border-radius: calc(0.25rem * var(--adaptive-scale)) !important;
    min-height: calc(38px * var(--adaptive-scale)) !important;
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
}

/* Small buttons */
.btn-sm,
.btn-small,
button.small,
.action-btn-sm,
a.btn-sm,
.comment-btn,
.reply-btn,
.share-btn,
.action-link,
.nav-btn-sm,
.btn-outline-secondary,
.btn-outline-danger,
.btn-outline-primary,
.btn-group .btn,
.dropdown-toggle,
.post-actions .btn,
.post-actions .btn-group .btn {
    font-size: calc(0.8rem * var(--adaptive-scale)) !important;
    padding: calc(0.25rem * var(--adaptive-scale)) calc(0.5rem * var(--adaptive-scale)) !important;
    min-height: calc(32px * var(--adaptive-scale)) !important;
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
}

/* Large buttons */
.btn-lg,
.btn-large,
button.large,
.action-btn-lg,
a.btn-lg,
.main-action-btn,
.nav-btn-lg {
    font-size: calc(1.1rem * var(--adaptive-scale)) !important;
    padding: calc(0.5rem * var(--adaptive-scale)) calc(1rem * var(--adaptive-scale)) !important;
    min-height: calc(48px * var(--adaptive-scale)) !important;
}

/* Links */
a:not(.btn):not(.nav-link):not(.dropdown-item):not(.navbar-brand),
.link {
    padding: calc(0.1rem * var(--adaptive-scale)) 0 !important;
}

/* Icons inside buttons */
.btn i,
button i,
.action-btn i,
.nav-btn i,
.btn .bi,
.btn .fa,
.btn .fas,
.btn .far,
.btn-sm i,
.btn-lg i {
    font-size: calc(1em * 1.1) !important;
    margin-right: calc(0.25rem * var(--adaptive-scale)) !important;
}

/* ===== LAYOUT & SPACING ===== */
/* Cards */
.card,
.post-card,
.comment-card,
.profile-card,
.community-card,
.panel,
.block,
.content-box {
    margin-bottom: calc(1rem * var(--adaptive-scale)) !important;
    border-radius: calc(0.25rem * var(--adaptive-scale)) !important;
}

.card-body,
.card-content,
.panel-body,
.block-content,
.content-box-body {
    padding: calc(1rem * var(--adaptive-scale)) !important;
}

.card-header,
.card-title-area,
.panel-header,
.block-header,
.content-box-header {
    padding: calc(0.75rem * var(--adaptive-scale)) calc(1rem * var(--adaptive-scale)) !important;
}

.card-footer,
.card-actions,
.panel-footer,
.block-footer,
.content-box-footer {
    padding: calc(0.75rem * var(--adaptive-scale)) calc(1rem * var(--adaptive-scale)) !important;
}

/* Containers */
.container,
.container-fluid,
.container-sm,
.container-md,
.container-lg,
.container-xl,
.container-xxl {
    padding-left: calc(1rem * var(--adaptive-scale)) !important;
    padding-right: calc(1rem * var(--adaptive-scale)) !important;
}

/* Margins & Padding */
.m-1, .mt-1, .my-1 { margin-top: calc(0.25rem * var(--adaptive-scale)) !important; }
.m-1, .mb-1, .my-1 { margin-bottom: calc(0.25rem * var(--adaptive-scale)) !important; }
.m-1, .ml-1, .ms-1, .mx-1 { margin-left: calc(0.25rem * var(--adaptive-scale)) !important; }
.m-1, .mr-1, .me-1, .mx-1 { margin-right: calc(0.25rem * var(--adaptive-scale)) !important; }

.m-2, .mt-2, .my-2 { margin-top: calc(0.5rem * var(--adaptive-scale)) !important; }
.m-2, .mb-2, .my-2 { margin-bottom: calc(0.5rem * var(--adaptive-scale)) !important; }
.m-2, .ml-2, .ms-2, .mx-2 { margin-left: calc(0.5rem * var(--adaptive-scale)) !important; }
.m-2, .mr-2, .me-2, .mx-2 { margin-right: calc(0.5rem * var(--adaptive-scale)) !important; }

.m-3, .mt-3, .my-3 { margin-top: calc(1rem * var(--adaptive-scale)) !important; }
.m-3, .mb-3, .my-3 { margin-bottom: calc(1rem * var(--adaptive-scale)) !important; }
.m-3, .ml-3, .ms-3, .mx-3 { margin-left: calc(1rem * var(--adaptive-scale)) !important; }
.m-3, .mr-3, .me-3, .mx-3 { margin-right: calc(1rem * var(--adaptive-scale)) !important; }

.m-4, .mt-4, .my-4 { margin-top: calc(1.5rem * var(--adaptive-scale)) !important; }
.m-4, .mb-4, .my-4 { margin-bottom: calc(1.5rem * var(--adaptive-scale)) !important; }
.m-4, .ml-4, .ms-4, .mx-4 { margin-left: calc(1.5rem * var(--adaptive-scale)) !important; }
.m-4, .mr-4, .me-4, .mx-4 { margin-right: calc(1.5rem * var(--adaptive-scale)) !important; }

.m-5, .mt-5, .my-5 { margin-top: calc(3rem * var(--adaptive-scale)) !important; }
.m-5, .mb-5, .my-5 { margin-bottom: calc(3rem * var(--adaptive-scale)) !important; }
.m-5, .ml-5, .ms-5, .mx-5 { margin-left: calc(3rem * var(--adaptive-scale)) !important; }
.m-5, .mr-5, .me-5, .mx-5 { margin-right: calc(3rem * var(--adaptive-scale)) !important; }

.p-1, .pt-1, .py-1 { padding-top: calc(0.25rem * var(--adaptive-scale)) !important; }
.p-1, .pb-1, .py-1 { padding-bottom: calc(0.25rem * var(--adaptive-scale)) !important; }
.p-1, .pl-1, .ps-1, .px-1 { padding-left: calc(0.25rem * var(--adaptive-scale)) !important; }
.p-1, .pr-1, .pe-1, .px-1 { padding-right: calc(0.25rem * var(--adaptive-scale)) !important; }

.p-2, .pt-2, .py-2 { padding-top: calc(0.5rem * var(--adaptive-scale)) !important; }
.p-2, .pb-2, .py-2 { padding-bottom: calc(0.5rem * var(--adaptive-scale)) !important; }
.p-2, .pl-2, .ps-2, .px-2 { padding-left: calc(0.5rem * var(--adaptive-scale)) !important; }
.p-2, .pr-2, .pe-2, .px-2 { padding-right: calc(0.5rem * var(--adaptive-scale)) !important; }

.p-3, .pt-3, .py-3 { padding-top: calc(1rem * var(--adaptive-scale)) !important; }
.p-3, .pb-3, .py-3 { padding-bottom: calc(1rem * var(--adaptive-scale)) !important; }
.p-3, .pl-3, .ps-3, .px-3 { padding-left: calc(1rem * var(--adaptive-scale)) !important; }
.p-3, .pr-3, .pe-3, .px-3 { padding-right: calc(1rem * var(--adaptive-scale)) !important; }

.p-4, .pt-4, .py-4 { padding-top: calc(1.5rem * var(--adaptive-scale)) !important; }
.p-4, .pb-4, .py-4 { padding-bottom: calc(1.5rem * var(--adaptive-scale)) !important; }
.p-4, .pl-4, .ps-4, .px-4 { padding-left: calc(1.5rem * var(--adaptive-scale)) !important; }
.p-4, .pr-4, .pe-4, .px-4 { padding-right: calc(1.5rem * var(--adaptive-scale)) !important; }

.p-5, .pt-5, .py-5 { padding-top: calc(3rem * var(--adaptive-scale)) !important; }
.p-5, .pb-5, .py-5 { padding-bottom: calc(3rem * var(--adaptive-scale)) !important; }
.p-5, .pl-5, .ps-5, .px-5 { padding-left: calc(3rem * var(--adaptive-scale)) !important; }
.p-5, .pr-5, .pe-5, .px-5 { padding-right: calc(3rem * var(--adaptive-scale)) !important; }

/* Grid system */
.row {
    margin-left: calc(-0.5rem * var(--adaptive-scale)) !important;
    margin-right: calc(-0.5rem * var(--adaptive-scale)) !important;
}

.col, [class*="col-"] {
    padding-left: calc(0.5rem * var(--adaptive-scale)) !important;
    padding-right: calc(0.5rem * var(--adaptive-scale)) !important;
}

/* ===== NAVIGATION ===== */
.navbar {
    padding: calc(0.5rem * var(--adaptive-scale)) calc(1rem * var(--adaptive-scale)) !important;
}

.navbar-brand {
    font-size: calc(1.25rem * var(--adaptive-scale)) !important;
    padding-top: calc(0.3125rem * var(--adaptive-scale)) !important;
    padding-bottom: calc(0.3125rem * var(--adaptive-scale)) !important;
}

.nav-link,
.navbar-nav .nav-link {
    padding: calc(0.5rem * var(--adaptive-scale)) calc(1rem * var(--adaptive-scale)) !important;
    font-size: calc(0.9rem * var(--adaptive-scale)) !important;
}

.dropdown-menu {
    padding: calc(0.5rem * var(--adaptive-scale)) 0 !important;
    min-width: calc(10rem * var(--adaptive-scale)) !important;
    border-radius: calc(0.375rem * var(--adaptive-scale)) !important;
    margin: calc(0.125rem * var(--adaptive-scale)) 0 0 !important;
    border-width: calc(1px * var(--adaptive-scale)) !important;
}

.dropdown-item,
.dropdown-menu .nav-link,
.dropdown-menu a,
.dropdown-header {
    padding: calc(0.25rem * var(--adaptive-scale)) calc(1.5rem * var(--adaptive-scale)) !important;
    font-size: calc(0.9rem * var(--adaptive-scale)) !important;
}

.dropdown-toggle::after {
    vertical-align: calc(0.3em * var(--adaptive-scale)) !important;
    border-top-width: calc(0.3em * var(--adaptive-scale)) !important;
    border-right-width: calc(0.3em * var(--adaptive-scale)) !important;
    border-left-width: calc(0.3em * var(--adaptive-scale)) !important;
    margin-left: calc(0.255em * var(--adaptive-scale)) !important;
}

.dropdown-divider {
    margin: calc(0.5rem * var(--adaptive-scale)) 0 !important;
    border-top-width: calc(1px * var(--adaptive-scale)) !important;
}

/* ===== SPECIAL ELEMENTS ===== */
/* Tags and badges */
.badge,
.tag,
.label-tag,
.category-badge,
.post-tag {
    font-size: calc(0.75rem * var(--adaptive-scale)) !important;
    padding: calc(0.25em * var(--adaptive-scale)) calc(0.5em * var(--adaptive-scale)) !important;
    border-radius: calc(0.25rem * var(--adaptive-scale)) !important;
    display: inline-flex !important;
    align-items: center !important;
    margin-right: calc(0.25rem * var(--adaptive-scale)) !important;
    margin-bottom: calc(0.25rem * var(--adaptive-scale)) !important;
}

/* Avatars and images */
.avatar,
.user-avatar,
.profile-avatar,
img.rounded-circle,
.user-img,
.avatar img,
.user-avatar img,
.profile-avatar img,
.rounded-circle img {
    object-fit: cover !important;
    border-radius: 0 !important; /* Square avatars everywhere */
    aspect-ratio: 1/1 !important; /* Force square ratio */
}

.avatar-xs,
.user-avatar-xs {
    width: calc(24px * var(--adaptive-scale)) !important;
    height: calc(24px * var(--adaptive-scale)) !important;
}

.avatar-sm,
.user-avatar-sm,
.comment-avatar {
    width: calc(32px * var(--adaptive-scale)) !important;
    height: calc(32px * var(--adaptive-scale)) !important;
}

.avatar-md,
.user-avatar-md,
.post-avatar {
    width: calc(48px * var(--adaptive-scale)) !important;
    height: calc(48px * var(--adaptive-scale)) !important;
}

.avatar-lg,
.user-avatar-lg,
.profile-avatar {
    width: calc(96px * var(--adaptive-scale)) !important;
    height: calc(96px * var(--adaptive-scale)) !important;
}

.avatar-xl,
.user-avatar-xl {
    width: calc(128px * var(--adaptive-scale)) !important;
    height: calc(128px * var(--adaptive-scale)) !important;
}

/* Country flags */
.flag,
.country-flag {
    vertical-align: middle !important;
}

.flag-xs,
.country-flag-xs {
    width: calc(16px * var(--adaptive-scale)) !important;
    height: calc(10px * var(--adaptive-scale)) !important;
}

.flag-sm,
.country-flag-sm {
    width: calc(20px * var(--adaptive-scale)) !important;
    height: calc(13px * var(--adaptive-scale)) !important;
}

.flag-md,
.country-flag-md {
    width: calc(24px * var(--adaptive-scale)) !important;
    height: calc(16px * var(--adaptive-scale)) !important;
}

/* Icons */
.icon,
.icon-sm,
.icon-md,
.icon-lg,
.bi,
.fa,
.fas,
.far,
.fab {
    vertical-align: middle !important;
}

.icon-sm,
.bi-sm,
.fa-sm {
    font-size: calc(0.85em * var(--adaptive-scale)) !important;
}

.icon-md,
.bi-md,
.fa-md {
    font-size: calc(1em * var(--adaptive-scale)) !important;
}

.icon-lg,
.bi-lg,
.fa-lg {
    font-size: calc(1.25em * var(--adaptive-scale)) !important;
}

/* Voting controls */
.vote-column,
.vote-controls {
    margin-right: calc(0.5rem * var(--adaptive-scale)) !important;
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
}

.vote-btn {
    width: calc(32px * var(--adaptive-scale)) !important;
    height: calc(32px * var(--adaptive-scale)) !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
}

.vote-count {
    font-size: calc(0.9rem * var(--adaptive-scale)) !important;
    font-weight: 600 !important;
    margin: calc(0.25rem * var(--adaptive-scale)) 0 !important;
}

/* Lists & Tables */
.list-group-item {
    padding: calc(0.75rem * var(--adaptive-scale)) calc(1.25rem * var(--adaptive-scale)) !important;
}

.table th,
.table td {
    padding: calc(0.75rem * var(--adaptive-scale)) !important;
}

/* ===== MEDIA QUERIES FOR SPECIFIC DEVICE TYPES ===== */
/* Mobile Phones */
@media (max-width: 575.98px) {
    :root {
        --adaptive-scale: 0.85;
    }
    
    /* Further optimization for really small screens */
    @media (max-width: 360px) {
        :root {
            --adaptive-scale: 0.8;
        }
    }
    
    /* Post actions buttons on mobile */
    .post-actions .btn,
    .post-actions .btn-group .btn,
    .post-actions .btn-sm,
    .post-actions .btn-outline-primary,
    .post-actions .btn-outline-secondary,
    .post-actions .btn-outline-danger {
        font-size: 0.75rem !important;
        padding: 0.1rem 0.3rem !important;
        min-height: 24px !important;
        display: inline-flex !important;
        align-items: center !important;
        justify-content: center !important;
    }
    
    /* Icons inside buttons on mobile */
    .post-actions .btn i,
    .post-actions .btn .bi {
        font-size: 0.85rem !important;
        margin-right: 0.1rem !important;
    }
}

/* Tablets */
@media (min-width: 576px) and (max-width: 991.98px) {
    :root {
        --adaptive-scale: 0.92;
    }
}

/* Desktops */
@media (min-width: 992px) and (max-width: 1399.98px) {
    :root {
        --adaptive-scale: 1;
    }
}

/* Large Desktops */
@media (min-width: 1400px) {
    :root {
        --adaptive-scale: 1.1;
    }
}

/* ===== ADDITIONAL ELEMENTS THAT NEED ADAPTIVE SIZING ===== */
/* Post and Comment Containers */
.post-item,
.comment-item,
.post-container,
.comment-container,
.comment-thread,
.post-wrapper,
.comment-wrapper,
article.post,
article.comment,
.card.post-card,
.row.post-row,
.post,
.reply,
.comment,
.nested-comment,
.media.post,
.media.comment,
.list-group-item.post,
.list-group-item.comment {
    border-radius: calc(0.375rem * var(--adaptive-scale)) !important;
    margin-bottom: calc(1rem * var(--adaptive-scale)) !important;
    border-width: calc(1px * var(--adaptive-scale)) !important;
}

/* Card bodies and content containers */
.card-body,
.post-body,
.comment-body,
.content-container,
.post-content-wrapper,
.comment-content-wrapper,
.post-content,
.comment-content,
.card-text,
.media-body,
.content,
.post-text,
.comment-text,
.body-content,
.card.post-card .card-body,
.post .card-body,
.comment .card-body,
.post-detail .card-body,
.comment-detail .card-body {
    padding: calc(1rem * var(--adaptive-scale)) !important;
    font-size: calc(0.95rem * var(--adaptive-scale)) !important;
    line-height: calc(1.5 * var(--adaptive-scale)) !important;
}

/* Post and comment actions */
.post-actions,
.comment-actions,
.action-buttons,
.post-footer,
.comment-footer,
.action-bar,
.post-card-footer,
.comment-card-footer,
.card-actions,
.action-links,
.action-row,
.interactions,
.post-meta-actions,
.comment-meta-actions,
.card-footer,
.post .card-footer,
.comment .card-footer {
    margin-top: calc(0.75rem * var(--adaptive-scale)) !important;
    padding-top: calc(0.5rem * var(--adaptive-scale)) !important;
    padding-bottom: calc(0.5rem * var(--adaptive-scale)) !important;
    gap: calc(0.5rem * var(--adaptive-scale)) !important;
}

/* Post and comment action buttons */
.post-actions .btn,
.comment-actions .btn,
.action-buttons .btn,
.action-bar .btn,
.post-footer .btn,
.comment-footer .btn,
.card-actions .btn,
.action-links .btn,
.interactions .btn,
.btn-action,
.btn-vote,
.btn-reply,
.btn-share,
.btn-report {
    font-size: calc(0.85rem * var(--adaptive-scale)) !important;
    padding: calc(0.25rem * var(--adaptive-scale)) calc(0.5rem * var(--adaptive-scale)) !important;
    margin-right: calc(0.25rem * var(--adaptive-scale)) !important;
    min-height: calc(30px * var(--adaptive-scale)) !important;
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
}

/* Tags - enhanced specific selectors with max specificity and !important */
.post-tags .badge,
.tag-list .badge,
.badge.bg-light,
.badge.bg-primary,
.badge.bg-secondary,
.badge.bg-success,
.badge.bg-danger,
.badge.bg-warning,
.badge.bg-info,
.badge.bg-dark,
.tag-item,
a.badge,
.badge-tag,
.tag-pill,
.tag,
.tags-container .tag,
.badge-pill,
.user-reputation,
.reputation-badge,
.reputation-level,
.badge-container .badge,
span.badge,
.post-meta .badge,
.post-info .badge,
.community-tags .badge,
.tag-cloud .badge,
.post-footer .badge,
.card .badge,
.post-item .badge,
.comment-item .badge,
.tags .badge,
body .badge,
article .badge,
.card-body .badge,
.post-content .badge,
.card-text .badge,
.list-item-tags .badge,
html body .badge {
    font-size: calc(0.75rem * var(--adaptive-scale)) !important;
    padding: calc(0.25rem * var(--adaptive-scale)) calc(0.5rem * var(--adaptive-scale)) !important;
    border-radius: calc(0.25rem * var(--adaptive-scale)) !important;
    margin-right: calc(0.25rem * var(--adaptive-scale)) !important;
    margin-bottom: calc(0.25rem * var(--adaptive-scale)) !important;
    display: inline-flex !important;
    align-items: center !important;
    line-height: 1.2 !important;
    white-space: nowrap !important;
    max-width: 100% !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    min-height: calc(24px * var(--adaptive-scale)) !important;
    vertical-align: middle !important;
}

/* Links in posts and comments */
.post-content a,
.comment-content a,
.post-body a,
.comment-body a,
.post-text a,
.comment-text a,
a.community-link,
a.user-link,
a.comment-author,
a.tag-link {
    font-size: inherit !important;
    word-break: break-word !important;
}

/* Voting buttons and vote count */
.vote-btn,
.vote-column .btn,
.upvote-btn,
.downvote-btn {
    font-size: calc(0.9rem * var(--adaptive-scale)) !important;
    padding: calc(0.2rem * var(--adaptive-scale)) !important;
    min-width: calc(30px * var(--adaptive-scale)) !important;
    min-height: calc(30px * var(--adaptive-scale)) !important;
}

/* User Profile Page Elements */
/* Profile header and info sections */
.profile-header,
.profile-info,
.profile-bio,
.profile-stats,
.profile-header-container,
.user-profile-header,
.user-stats,
.user-details,
.profile-section,
.profile-data,
.profile-achievements {
    padding: calc(1rem * var(--adaptive-scale)) !important;
    margin-bottom: calc(1.5rem * var(--adaptive-scale)) !important;
    border-radius: calc(0.375rem * var(--adaptive-scale)) !important;
}

/* Profile name and username */
.profile-name,
.profile-username,
.display-name,
.username-display,
.profile-header h1,
.profile-header h2,
.profile-title {
    font-size: calc(1.25rem * var(--adaptive-scale)) !important;
    margin-bottom: calc(0.5rem * var(--adaptive-scale)) !important;
    line-height: 1.3 !important;
}

/* Profile actions */
.profile-actions,
.profile-buttons,
.profile-controls,
.user-actions,
.follow-btn,
.message-btn,
.user-controls {
    margin-top: calc(1rem * var(--adaptive-scale)) !important;
    gap: calc(0.5rem * var(--adaptive-scale)) !important;
}

/* Profile tabs */
.profile-tabs,
.profile-nav,
.user-tabs,
.profile-navigation,
.nav-tabs,
.nav-pills {
    margin-bottom: calc(1.5rem * var(--adaptive-scale)) !important;
    border-bottom-width: calc(1px * var(--adaptive-scale)) !important;
}

.profile-tabs .nav-link,
.profile-nav .nav-link,
.user-tabs .nav-link,
.nav-tabs .nav-link,
.nav-pills .nav-link {
    padding: calc(0.5rem * var(--adaptive-scale)) calc(1rem * var(--adaptive-scale)) !important;
    margin-right: calc(0.25rem * var(--adaptive-scale)) !important;
    font-size: calc(0.9rem * var(--adaptive-scale)) !important;
    border-bottom-width: calc(2px * var(--adaptive-scale)) !important;
}

/* Profile stat items */
.stat-item,
.profile-stat,
.user-stat,
.karma-stat,
.reputation-stat,
.posts-stat,
.comments-stat {
    margin-right: calc(1.5rem * var(--adaptive-scale)) !important;
    padding-right: calc(1rem * var(--adaptive-scale)) !important;
    border-right-width: calc(1px * var(--adaptive-scale)) !important;
}

.stat-value,
.stat-count,
.profile-stat-value,
.user-stat-value {
    font-size: calc(1.5rem * var(--adaptive-scale)) !important;
    font-weight: 700 !important;
    margin-bottom: calc(0.25rem * var(--adaptive-scale)) !important;
}

.stat-label,
.stat-name,
.profile-stat-label,
.user-stat-label {
    font-size: calc(0.8rem * var(--adaptive-scale)) !important;
    text-transform: uppercase !important;
    letter-spacing: calc(0.05em * var(--adaptive-scale)) !important;
}

/* Reputation progress bar */
.reputation-progress,
.karma-progress,
.progress,
.profile-progress {
    height: calc(0.5rem * var(--adaptive-scale)) !important;
    border-radius: calc(0.25rem * var(--adaptive-scale)) !important;
    margin-bottom: calc(0.5rem * var(--adaptive-scale)) !important;
    overflow: hidden !important;
}
/* ===== ACCESSIBILITY FEATURES ===== */
/* Consolidated from accessibility.css */

/* Accessibility and Responsive Design Enhancements */

/* Focus styles */
:focus {
  outline: 3px solid #4285f4 !important;
  outline-offset: 2px !important;
}

/* Skip links */
.skip-link {
  position: absolute;
  top: -40px;
  left: 0;
  background: #4285f4;
  color: white;
  padding: 8px;
  z-index: 10000;
  transition: top 0.3s;
}

.skip-link:focus {
  top: 0;
}

/* Screen reader utilities */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

.sr-only-focusable:active,
.sr-only-focusable:focus {
  position: static;
  width: auto;
  height: auto;
  overflow: visible;
  clip: auto;
  white-space: normal;
}

/* Color contrast enhancement */
.text-enhanced-contrast {
  color: #000000 !important;
}

.bg-enhanced-contrast {
  background-color: #ffffff !important;
  border: 1px solid #000000 !important;
}

/* Improved button focus states */
.btn:focus, .btn:active:focus {
  box-shadow: 0 0 0 0.25rem rgba(66, 133, 244, 0.5) !important;
}

/* Improved form inputs */
.form-control:focus {
  border-color: #4285f4 !important;
  box-shadow: 0 0 0 0.25rem rgba(66, 133, 244, 0.25) !important;
}

/* Enhanced hover states for links */
a:hover {
  text-decoration: underline !important;
}

/* Mobile-friendly adjustments */
@media (max-width: 768px) {
  /* Increase tap target sizes on mobile */
  .btn, .nav-link, .dropdown-item {
    padding: 0.5rem 0.75rem;
    min-height: 44px;
    min-width: 44px;
    display: inline-flex;
    align-items: center;
  }
  
  /* Adjust font sizes for readability */
  body {
    font-size: 16px !important;
  }
  
  h1 { font-size: 1.75rem !important; }
  h2 { font-size: 1.5rem !important; }
  h3 { font-size: 1.25rem !important; }
  
  /* Stack elements vertically */
  .mobile-stack {
    flex-direction: column !important;
  }
  
  /* Adjust spacing for mobile */
  .mobile-my-2 {
    margin-top: 0.5rem !important;
    margin-bottom: 0.5rem !important;
  }
  
  /* Adjust vote controls for mobile */
  .vote-controls {
    flex-direction: row !important;
    margin-bottom: 0.5rem !important;
  }
  
  .vote-controls .vote-btn {
    padding: 0.5rem;
  }
  
  .vote-count {
    margin: 0 0.5rem !important;
  }
}

/* Tablet-specific adjustments */
@media (min-width: 769px) and (max-width: 1024px) {
  .tablet-flex-column {
    flex-direction: column !important;
  }
  
  /* Ensure adequate spacing */
  .tablet-my-2 {
    margin-top: 0.5rem !important;
    margin-bottom: 0.5rem !important;
  }
}

/* High contrast mode */
@media (forced-colors: active) {
  /* Ensure elements have appropriate borders */
  .card, .btn, .form-control {
    border: 1px solid;
  }
  
  /* Ensure text remains visible */
  a, .btn, .text-muted {
    forced-color-adjust: none;
  }
}

/* Reduced motion preferences */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}
/* ===== FLAG AND AVATAR FIXES ===== */
/* Consolidated from flag-fixes.css */

/* 
 * Flag, Avatar, and Dropdown Fixes
 * Contains fixes for country flags, avatar styling, and dropdown buttons
 */

/* Country flag size adjustments */
.flag-icon {
    width: 16px !important;
    height: 16px !important;
    margin-right: 0.25rem !important;
    vertical-align: middle !important;
    object-fit: contain !important;
    display: inline-block !important;
}

/* Fix for dropdown icons */
.dropdown-toggle::after {
    display: none !important;
}

/* Profile dropdown fixes */
#mobileUserDropdown, 
#userDropdown {
    padding: 0 !important;
    margin: 0 !important;
    background: none !important;
    border: none !important;
}

/* Make country flags align with text */
.user-country {
    display: flex !important;
    align-items: center !important;
}

/* Fix flag sizes in profile pages */
.profile-info .flag-icon {
    width: 20px !important;
    height: 20px !important;
}

/* Consistent avatar styling */
.nav-avatar img,
.avatar-placeholder,
.post-item .avatar-placeholder,
.comment-item .avatar-placeholder,
.rounded-circle {
    border-radius: 0 !important; /* Square avatars as requested */
    overflow: hidden !important;
}

/* Ensure consistent size of avatar placeholders */
.avatar-placeholder {
    width: 22px !important;
    height: 22px !important;
    background-color: #6c757d !important;
    color: #fff !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
}

/* Fix rounded avatar in comments to match square style */
.comment-header .rounded-circle,
.post-author .rounded-circle {
    border-radius: 0 !important;
}
/* ===== VOTE STYLING ===== */
/* Consolidated from vote.css */

/* 
 * Vote styling for Discuss platform
 * This ensures vote buttons are properly styled when active
 */

/* Vote column layout - always vertical */
.vote-column,
.vote-controls {
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
    min-width: 30px !important;
    margin-right: 0.5rem !important;
}

/* Default vote button colors */
.fa-arrow-up, .fa-arrow-down,
.bi-arrow-up-short, .bi-arrow-down-short {
    transition: color 0.2s ease;
    font-size: 1.5rem !important;
}

/* Active vote button colors - multiple selectors to handle all cases */
.voted .fa-arrow-up, 
a.voted .fa-arrow-up,
.vote-btn.voted .fa-arrow-up,
.upvote-btn.voted .fa-arrow-up,
.active .fa-arrow-up,
a.active .fa-arrow-up,
.upvote-btn.active .fa-arrow-up,
.voted .bi-arrow-up-short, 
a.voted .bi-arrow-up-short,
.vote-btn.voted .bi-arrow-up-short,
.upvote-btn.voted .bi-arrow-up-short,
.active .bi-arrow-up-short,
a.active .bi-arrow-up-short,
.upvote-btn.active .bi-arrow-up-short {
    color: #FF4500 !important;
}

.voted .fa-arrow-down, 
a.voted .fa-arrow-down,
.vote-btn.voted .fa-arrow-down,
.downvote-btn.voted .fa-arrow-down,
.active .fa-arrow-down,
a.active .fa-arrow-down,
.downvote-btn.active .fa-arrow-down,
.voted .bi-arrow-down-short, 
a.voted .bi-arrow-down-short,
.vote-btn.voted .bi-arrow-down-short,
.downvote-btn.voted .bi-arrow-down-short,
.active .bi-arrow-down-short,
a.active .bi-arrow-down-short,
.downvote-btn.active .bi-arrow-down-short {
    color: #7193FF !important;
}

/* Hover effects */
a:hover .fa-arrow-up,
a:hover .bi-arrow-up-short {
    color: rgba(255, 69, 0, 0.7) !important;
}

a:hover .fa-arrow-down,
a:hover .bi-arrow-down-short {
    color: rgba(113, 147, 255, 0.7) !important;
}

/* Additional selector to ensure active state is preserved */
.vote-btn.active, .vote-btn.voted {
    font-weight: bold;
}

/* Vote buttons sizing and alignment */
.vote-btn {
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    padding: 0 !important;
    margin: 0 !important;
    background: none !important;
    border: none !important;
    cursor: pointer !important;
    min-width: 30px !important;
    min-height: 30px !important;
}

/* Vote count styling */
.vote-count {
    font-weight: bold !important;
    font-size: 0.9rem !important;
    margin: 0.1rem 0 !important;
    text-align: center !important;
}

/* ===== ADAPTIVE TYPOGRAPHY AND SIZING CLASSES ===== */
/* Adaptive Typography Classes */
.text-adaptive-xs {
    font-size: var(--font-size-xs) !important;
    line-height: 1.4 !important;
}

.text-adaptive-sm {
    font-size: var(--font-size-sm) !important;
    line-height: 1.5 !important;
}

.text-adaptive-md {
    font-size: var(--font-size-md) !important;
    line-height: 1.6 !important;
}

.text-adaptive-lg {
    font-size: var(--font-size-lg) !important;
    line-height: 1.5 !important;
}

.text-adaptive-xl {
    font-size: var(--font-size-xl) !important;
    line-height: 1.4 !important;
}

/* Adaptive Spacing Classes */
.mt-adaptive {
    margin-top: var(--spacing-md) !important;
}

.mb-adaptive {
    margin-bottom: var(--spacing-md) !important;
}

.my-adaptive {
    margin-top: var(--spacing-md) !important;
    margin-bottom: var(--spacing-md) !important;
}

.mx-adaptive {
    margin-left: var(--spacing-md) !important;
    margin-right: var(--spacing-md) !important;
}

.p-adaptive {
    padding: var(--spacing-md) !important;
}

.pt-adaptive {
    padding-top: var(--spacing-md) !important;
}

.pb-adaptive {
    padding-bottom: var(--spacing-md) !important;
}

.py-adaptive {
    padding-top: var(--spacing-md) !important;
    padding-bottom: var(--spacing-md) !important;
}

.px-adaptive {
    padding-left: var(--spacing-md) !important;
    padding-right: var(--spacing-md) !important;
}

/* Extra small spacing variants */
.mt-adaptive-xs {
    margin-top: var(--spacing-xs) !important;
}

.mb-adaptive-xs {
    margin-bottom: var(--spacing-xs) !important;
}

.p-adaptive-xs {
    padding: var(--spacing-xs) !important;
}

/* Small spacing variants */
.mt-adaptive-sm {
    margin-top: var(--spacing-sm) !important;
}

.mb-adaptive-sm {
    margin-bottom: var(--spacing-sm) !important;
}

.p-adaptive-sm {
    padding: var(--spacing-sm) !important;
}

/* Large spacing variants */
.mt-adaptive-lg {
    margin-top: var(--spacing-lg) !important;
}

.mb-adaptive-lg {
    margin-bottom: var(--spacing-lg) !important;
}

.p-adaptive-lg {
    padding: var(--spacing-lg) !important;
}

/* Adaptive Icon Classes */
.icon-adaptive-xs {
    font-size: var(--icon-size-xs) !important;
}

.icon-adaptive-sm {
    font-size: var(--icon-size-sm) !important;
}

.icon-adaptive-md {
    font-size: var(--icon-size-md) !important;
}

.icon-adaptive-lg {
    font-size: var(--icon-size-lg) !important;
}

/* Touch-optimized elements */
.touch-optimized {
    min-height: var(--min-touch-target) !important;
    min-width: var(--min-touch-target) !important;
}

/* Adaptive width and height constraints */
.w-adaptive-25 {
    width: calc(25% * var(--adaptive-scale)) !important;
}

.w-adaptive-50 {
    width: calc(50% * var(--adaptive-scale)) !important;
}

.w-adaptive-75 {
    width: calc(75% * var(--adaptive-scale)) !important;
}

.w-adaptive-100 {
    width: calc(100% * var(--adaptive-scale)) !important;
}

.h-adaptive-25 {
    height: calc(25% * var(--adaptive-scale)) !important;
}

.h-adaptive-50 {
    height: calc(50% * var(--adaptive-scale)) !important;
}

.h-adaptive-75 {
    height: calc(75% * var(--adaptive-scale)) !important;
}

.h-adaptive-100 {
    height: calc(100% * var(--adaptive-scale)) !important;
}

/* Adaptive container widths - more precise than Bootstrap defaults */
@media (min-width: 576px) {
    .container-adaptive {
        max-width: 540px !important;
    }
}

@media (min-width: 768px) {
    .container-adaptive {
        max-width: 720px !important;
    }
}

@media (min-width: 992px) {
    .container-adaptive {
        max-width: 960px !important;
    }
}

@media (min-width: 1200px) {
    .container-adaptive {
        max-width: 1140px !important;
    }
}

@media (min-width: 1400px) {
    .container-adaptive {
        max-width: 1320px !important;
    }
}

/* Special handling for mobile-first image adaptations */
img.img-adaptive {
    max-width: 100% !important;
    height: auto !important;
    transition: max-height 0.3s ease-in-out !important;
}

@media (max-width: 575.98px) {
    img.img-adaptive:not(.img-adaptive-lg):not(.img-adaptive-xl) {
        max-height: 200px !important;
    }
    
    img.img-adaptive-lg {
        max-height: 250px !important;
    }
    
    img.img-adaptive-xl {
        max-height: 300px !important;
    }
}

/* ===== NAVBAR UNIFIED STYLING ===== */
/* Reset all navbar styles to ensure we start clean */
body .navbar,
body .navbar *,
body .navbar *:before,
body .navbar *:after {
    box-sizing: border-box !important;
}

/* Base navbar structure */
body .navbar {
    background-color: #272b30 !important;
    padding: 0 !important;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.15) !important; /* Lighter, smaller shadow */
    width: 100% !important;
    position: sticky !important;
    top: 0 !important;
    z-index: 1030 !important;
    border: none !important; /* Remove any borders */
}

body .navbar .container {
    padding: 0.2rem 0.4rem !important; /* Ultra-compact padding */
    display: flex !important;
    flex-direction: column !important;
    width: 100% !important;
    max-width: 1200px !important;
    border-bottom: none !important; /* Removed border */
}

/* Header row with all elements in single row */
body .navbar .header-row {
    display: flex !important;
    justify-content: space-between !important;
    align-items: center !important;
    width: 100% !important;
    padding: 0.2rem 0 !important; /* Reduced padding */
    height: 32px !important; /* Reduced height */
    position: relative !important; /* Needed for absolute positioning of search */
    border: none !important; /* Ensure no borders */
}

/* Left side with logo and donation link */
body .navbar .header-left {
    display: flex !important;
    align-items: center !important;
    justify-content: flex-start !important;
    width: 100px !important; /* Increased from 70px to accommodate donate text */
    z-index: 3 !important; /* Stay above search bar */
    border: none !important; /* Ensure no borders */
}

/* Donation link styles */
body .navbar .donation-link {
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    margin-left: 0 !important; /* Removed margin */
    padding: 0.2rem !important; /* Reduced padding */
    color: #5bc0de !important;
    border: none !important; /* Ensure no borders */
}

/* Donate text styling */
body .navbar .donate-text {
    color: #FF8C00 !important; /* Orange color */
    font-size: 0.75rem !important; /* Slightly larger */
    font-weight: bold !important;
    margin-left: 0.2rem !important; /* Increased spacing */
    text-transform: lowercase !important;
    display: inline-block !important; /* Ensure it's displayed */
}

/* Only hide donate text on very small screens */
@media (max-width: 350px) {
    body .navbar .donate-text {
        display: none !important;
    }
}

body .navbar .donation-link:hover,
body .navbar .donation-link:focus {
    color: #fff !important;
}

body .navbar .donation-link:hover .donate-text,
body .navbar .donation-link:focus .donate-text {
    color: #FFA500 !important; /* Brighter orange on hover */
}

/* Common navbar elements */
body .navbar-brand {
    display: flex !important;
    align-items: center !important;
    margin: 0 !important;
    margin-left: 10px !important; /* Added margin to move away from left edge */
    padding: 0 !important;
    font-size: 1.2rem !important;
    font-weight: bold !important;
    color: #ffffff !important;
    text-decoration: none !important;
}

body .navbar-brand i {
    font-size: 1.2rem !important;
    margin-right: 0 !important; /* Removed margin */
    color: #5bc0de !important;
    border: none !important; /* Ensure no borders */
}

/* Unified search bar */
body .navbar .search-container {
    position: absolute !important;
    left: 50% !important;
    transform: translateX(-50%) !important;
    max-width: 280px !important; /* Reduced width for all screens */
    display: flex !important;
    align-items: center !important;
    z-index: 2 !important;
}

body .navbar .search-container .input-group {
    height: 26px !important;
    width: 100% !important;
    display: flex !important;
    flex-direction: row !important;
    align-items: stretch !important;
    border-radius: 3px !important;
    overflow: hidden !important; /* Fix search bar background extending issue */
    max-height: 26px !important; /* Ensure height doesn't extend */
    box-sizing: border-box !important; /* Ensure padding is included in height */
}

body .navbar .search-container .form-control,
body .navbar .search-container .search-input {
    background-color: #2c2c2c !important;
    border: 1px solid #333 !important; /* Darker, less visible border */
    height: 26px !important;
    min-height: 26px !important;
    max-height: 26px !important;
    font-size: 0.8rem !important;
    border-radius: 4px !important; /* Rounded corners on both sides */
    color: #fff !important;
    padding: 0.15rem 0.5rem !important;
    flex: 1 !important;
    box-shadow: none !important; /* Remove any shadow */
    width: 160px !important; /* Fixed width since we don't have a button */
    line-height: 26px !important; /* Match line height to container height */
    box-sizing: border-box !important; /* Ensure padding is included in height */
    display: flex !important; /* Use flexbox */
    align-items: center !important; /* Center content vertically */
    overflow: hidden !important; /* Prevent content overflow */
}

/* Style for standalone search without a button */
body .navbar .search-container .standalone-search {
    border-radius: 4px !important; /* Rounded corners on both sides */
    text-align: center !important; /* Center the placeholder text */
}

body .navbar .search-container .btn i.bi,
body .navbar .search-container .search-icon {
    font-size: 0.8rem !important;
    color: #fff !important;
}

/* User menu area */
body .navbar .user-menu {
    display: flex !important;
    align-items: center !important;
    justify-content: flex-end !important;
    margin-left: auto !important;
    margin-right: 10px !important; /* Added margin to move away from right edge */
    width: 100px !important; /* Increased to match header-left (100px) */
    z-index: 3 !important; /* Stay above search bar */
}

body .navbar .user-menu .nav-link {
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    padding: 0.25rem !important; /* Further reduced for tighter spacing */
    position: relative !important;
    color: #aaa !important;
    text-decoration: none !important;
    border: none !important; /* Remove any borders */
}

body .navbar .user-menu .nav-link:hover,
body .navbar .user-menu .nav-link:focus {
    color: #fff !important;
}

body .navbar .user-menu .dropdown-menu {
    min-width: 200px !important;
    padding: 0.5rem 0 !important;
    margin-top: 0.5rem !important;
    background-color: #3e444c !important;
    border: 1px solid #444 !important;
    border-radius: 0.25rem !important;
    box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15) !important;
}

body .navbar .user-menu .dropdown-item {
    padding: 0.5rem 1rem !important;
    font-size: 0.9rem !important;
    color: #ddd !important;
    background-color: transparent !important;
    border: none !important;
    text-decoration: none !important;
}

body .navbar .user-menu .dropdown-item:hover,
body .navbar .user-menu .dropdown-item:focus {
    background-color: #4e5460 !important;
    color: #fff !important;
}

/* Badge notifications */
body .navbar .badge-notification {
    position: absolute !important;
    top: 0 !important;
    right: 0 !important;
    transform: translate(50%, -50%) !important;
    font-size: 0.65rem !important;
    padding: 0.25rem 0.35rem !important;
    background-color: #dc3545 !important;
    color: #fff !important;
    border-radius: 10rem !important;
    min-width: 1rem !important;
    height: 1rem !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
}

/* Square avatars - aligned with other header elements */
body .navbar .avatar, 
body .navbar .nav-avatar img {
    width: 22px !important;
    height: 22px !important;
    border-radius: 0 !important; /* Square avatars */
    object-fit: cover !important;
    margin: 0 !important; /* Remove any margins */
    display: inline-flex !important;
    vertical-align: middle !important; /* Align with text */
    align-self: center !important; /* Ensure avatar is centered vertically */
}

body .navbar .nav-avatar {
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    height: 22px !important; /* Match height of avatar */
    line-height: 22px !important; /* Ensure vertical alignment */
}

body .navbar .avatar-placeholder {
    width: 22px !important;
    height: 22px !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    background-color: #6c757d !important;
    color: #fff !important;
    border-radius: 0 !important; /* Square placeholder */
    font-size: 0.75rem !important;
    margin: 0 !important;
}

/* Responsive adjustments for the search bar */
@media (max-width: 767.98px) {
    body .navbar .search-container {
        max-width: 150px !important;
    }
    
    body .navbar .search-container .form-control {
        width: 100px !important;
        min-width: 80px !important;
        padding: 0.1rem 0.2rem !important;
        font-size: 0.75rem !important;
    }
    
    body .navbar .search-container .btn {
        width: 24px !important;
        min-width: 24px !important;
    }
    
    body .navbar .search-container .btn i.bi {
        font-size: 0.7rem !important;
    }
}

/* Responsive navbar adaptations for mobile */
@media (max-width: 575.98px) {
    /* Fix search container for very small screens */
    body .navbar .search-container {
        max-width: 120px !important;
    }
    
    /* Fix search field for very small screens */
    body .navbar .search-container .form-control {
        width: 70px !important;
        min-width: 50px !important;
    }
    
    /* Compact for mobile */
    body .navbar .container {
        padding: 0 !important; /* Removed padding completely */
        border-bottom: none !important; /* Remove bottom border */
    }
    
    body .navbar .header-row {
        flex-wrap: nowrap !important;
        justify-content: space-between !important;
        gap: 0 !important; /* No gaps between elements */
        height: 32px !important;
        padding: 0.15rem 0 !important;
        position: relative !important;
    }
    
    /* Complete mobile search bar fix - using absolute positioning */
    body .navbar .search-container {
        position: absolute !important;
        left: 50% !important;
        top: 50% !important;
        transform: translate(-50%, -50%) !important;
        width: 120px !important;
        height: 22px !important;
        border-radius: 4px !important;
        overflow: hidden !important;
        z-index: 2 !important;
        background-color: #2c2c2c !important;
    }
    
    /* Mobile specific search styling */
    body .navbar .search-container .search-form {
        width: 100% !important;
        height: 100% !important;
        margin: 0 !important;
        padding: 0 !important;
    }
    
    body .navbar .search-container .search-wrapper {
        width: 100% !important;
        height: 100% !important;
        overflow: hidden !important;
        border-radius: 4px !important;
    }
    
    body .navbar .search-container .input-group {
        width: 100% !important;
        height: 100% !important;
        min-height: 22px !important;
        max-height: 22px !important;
        max-width: 120px !important;
        margin: 0 !important;
        padding: 0 !important;
        border: none !important;
        background: none !important;
        overflow: hidden !important;
        box-sizing: border-box !important;
        line-height: 22px !important;
        display: block !important;
    }
    
    body .navbar .search-container .form-control,
    body .navbar .search-container .search-input {
        width: 100% !important;
        max-width: 120px !important;
        height: 22px !important;
        min-height: 22px !important;
        max-height: 22px !important;
        font-size: 0.7rem !important;
        padding: 0 0.25rem !important;
        text-overflow: ellipsis !important;
        white-space: nowrap !important;
        overflow: hidden !important;
        border: 1px solid #333 !important;
        border-radius: 4px !important;
        background-color: #2c2c2c !important;
        color: #f8f9fa !important;
        text-align: center !important;
        line-height: 22px !important;
        box-sizing: border-box !important;
    }
    
    /* Mobile icons spacing */
    body .navbar .donation-link {
        padding: 0.15rem !important;
        margin: 0 0.1rem !important;
        display: flex !important;
        align-items: center !important;
    }
    
    body .navbar .donate-text {
        font-size: 0.7rem !important;
        margin-left: 0.1rem !important;
    }
    
    body .navbar .user-menu .nav-link {
        padding: 0.15rem !important;
        margin: 0 0.1rem !important;
    }
    
    body .navbar-brand i {
        font-size: 0.9rem !important;
        margin-right: 0 !important;
    }
}

/* Media query for base adaptive scale */
@media (max-width: 575.98px) {
    :root {
        --adaptive-scale: var(--mobile-scale);
    }
    
    .container, .container-fluid {
        padding-left: var(--spacing-sm) !important;
        padding-right: var(--spacing-sm) !important;
    }
    
    /* Adjust card and list styles for mobile */
    .card, .list-group-item {
        margin-bottom: var(--spacing-sm) !important;
    }
    
    .card-body {
        padding: var(--spacing-sm) !important;
    }
    
    /* Optimize touch targets on mobile */
    button:not(.no-touch-optimize), 
    .btn:not(.no-touch-optimize), 
    a.nav-link:not(.no-touch-optimize), 
    .dropdown-item:not(.no-touch-optimize) {
        min-height: var(--min-touch-target) !important;
    }
    
    /* Mobile-specific text adjustments */
    h1, .h1 {
        font-size: calc(1.5rem * var(--adaptive-scale)) !important;
    }
    
    h2, .h2 {
        font-size: calc(1.25rem * var(--adaptive-scale)) !important;
    }
    
    /* Mobile optimization for tables */
    table.table-adaptive {
        font-size: var(--font-size-sm) !important;
    }
    
    table.table-adaptive th, 
    table.table-adaptive td {
        padding: 0.25rem 0.5rem !important;
    }
}

/* Small devices (tablets, 576px and up) */
@media (min-width: 576px) and (max-width: 991.98px) {
    :root {
        --adaptive-scale: var(--tablet-scale);
    }
    
    .container, .container-fluid {
        padding-left: var(--spacing-md) !important;
        padding-right: var(--spacing-md) !important;
    }
    
    .card, .list-group-item {
        margin-bottom: var(--spacing-md) !important;
    }
    
    .card-body {
        padding: var(--spacing-md) !important;
    }
    
    /* Table adaptations for tablet */
    table.table-adaptive {
        font-size: var(--font-size-md) !important;
    }
    
    table.table-adaptive th, 
    table.table-adaptive td {
        padding: 0.5rem 0.75rem !important;
    }
}

/* Medium to large devices (desktops, 992px and up) */
@media (min-width: 992px) {
    :root {
        --adaptive-scale: var(--desktop-scale);
    }
    
    .container, .container-fluid {
        padding-left: var(--spacing-lg) !important;
        padding-right: var(--spacing-lg) !important;
    }
    
    .card, .list-group-item {
        margin-bottom: var(--spacing-lg) !important;
    }
    
    .card-body {
        padding: var(--spacing-lg) !important;
    }
}

/* Extra large devices (large desktops, 1400px and up) */
@media (min-width: 1400px) {
    :root {
        --adaptive-scale: var(--large-desktop-scale);
    }
    
    /* Increase spacing for very large screens */
    .container, .container-fluid {
        padding-left: var(--spacing-xl) !important;
        padding-right: var(--spacing-xl) !important;
    }
}
