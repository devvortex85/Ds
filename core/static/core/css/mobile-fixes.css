/* Mobile-specific fixes for Discuss platform */

/* ---- ICON FIXES ---- */
/* Fix icon size issues and remove outlines */
.bi {
    font-size: 0.9rem !important;
    width: auto !important;
    height: auto !important;
    line-height: 1 !important;
    vertical-align: middle !important;
    outline: none !important;
    display: inline-block !important;
}

/* Fix donate icon */
.bi-currency-euro, .donate-icon {
    font-size: 0.85rem !important;
}

/* ---- POST LAYOUT FIXES ---- */
/* Post items should always be row-oriented with voting on left side */
.post-item,
.post-item .d-flex,
.comment-item,
.comment-item .d-flex,
.nested-reply {
    display: flex !important;
    flex-direction: row !important;
    width: 100% !important;
}

/* Special override to ensure all vote columns are vertical regardless of screen size */
.vote-column,
.vote-controls,
.post-item .vote-column,
.comment-item .vote-column,
.mobile-stack.vote-column,
.mobile-stack.vote-controls,
.post-item .mobile-stack.vote-column,
.post-item .mobile-stack.vote-controls {
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
    justify-content: flex-start !important;
    margin-right: 0.5rem !important;
    min-width: 36px !important;
    max-width: 36px !important;
    width: 36px !important;
    padding-top: 0.25rem !important;
}

/* Make sure vote icons are large enough */
.vote-btn i.bi,
.vote-btn i.bi-arrow-up-short,
.vote-btn i.bi-arrow-down-short {
    font-size: 1.5rem !important;
}

/* Force post content to take remaining width */
.post-item .post-content,
.post-item .post-content-column,
.comment-item .comment-content-column,
.nested-reply .reply-content-column {
    flex: 1 !important;
    width: calc(100% - 36px) !important;
}

/* Override the d-flex to ensure layout is correct */
.post-item .d-flex {
    flex-direction: row !important;
}

/* ---- NAVBAR FIXES ---- */
/* Mobile header structure */
.navbar .d-lg-none {
    padding: 0.5rem 0 !important;
}

/* Mobile navigation styling */
.navbar .d-lg-none .nav-link {
    padding: 0.2rem 0.5rem !important;
    text-align: center !important;
    font-size: 0.8rem !important;
}

.navbar .d-lg-none .nav-link i {
    font-size: 1.1rem !important;
    display: block !important;
    margin-bottom: 0.1rem !important;
}

/* Desktop navbar two-row structure */
.navbar .d-none.d-lg-flex {
    padding: 0.5rem 0 !important;
}

/* Desktop navigation row */
.navbar .d-none.d-lg-flex .border-top {
    border-top: 1px solid #444 !important;
}

/* Make search bar responsive */
.navbar .w-75 {
    max-width: 300px !important;
    margin: 0 auto !important;
}

.search-form {
    width: 100% !important;
}

.navbar .input-group {
    display: flex !important;
    flex-direction: row !important;
    align-items: center !important;
    width: 100% !important;
    height: 22px !important;
}

.navbar .input-group .form-control {
    background-color: #2c2c2c !important;
    border: 1px solid #444 !important;
    height: 22px !important;
    min-height: 22px !important;
    font-size: 0.8rem !important;
    padding: 0.2rem 0.4rem !important;
    margin: 0 !important;
    line-height: 1 !important;
    border-top-right-radius: 0 !important;
    border-bottom-right-radius: 0 !important;
}

.navbar .input-group .btn {
    background-color: #2c2c2c !important;
    border: 1px solid #444 !important;
    border-left: none !important;
    height: 22px !important;
    min-height: 22px !important;
    width: 22px !important;
    padding: 0 !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    border-top-left-radius: 0 !important;
    border-bottom-left-radius: 0 !important;
    margin: 0 !important;
}

/* Navbar button sizing */
.navbar .btn {
    min-height: 22px !important;
    min-width: 22px !important;
    max-height: 22px !important;
    max-width: 22px !important;
    padding: 0 !important;
    margin-left: 0.2rem !important;
    margin-right: 0.2rem !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
}

/* ---- FORM AND BUTTON SIZE FIXES ---- */
/* Reduce action button sizes */
.post-actions .btn,
.comment-actions .btn {
    padding: 0.15rem 0.3rem !important;
    font-size: 0.75rem !important;
    line-height: 1.1 !important;
    height: auto !important;
    margin-right: 0.25rem !important;
    margin-bottom: 0.25rem !important;
    min-height: 24px !important;
}

/* Post detail action buttons */
.btn-outline-primary, 
.btn-outline-danger, 
.btn-outline-secondary {
    padding: 0.2rem 0.4rem !important;
    font-size: 0.8rem !important;
    height: auto !important;
    line-height: 1.1 !important;
    min-height: 26px !important;
}

/* Post content and field sizing */
.post-content, .comment-content {
    font-size: 0.95rem !important;
    line-height: 1.4 !important;
}

/* Reduce form field sizes */
.form-control, .form-select {
    font-size: 0.9rem !important;
    padding: 0.25rem 0.5rem !important;
    min-height: 32px !important;
}

textarea.form-control {
    min-height: 100px !important;
}

/* Make post form fields more compact */
.post-form .form-control, 
.comment-form .form-control {
    font-size: 0.9rem !important;
    padding: 0.25rem 0.5rem !important;
}

/* Card body padding */
.card-body {
    padding: 0.5rem !important;
}

/* Card margins */
.card {
    margin-bottom: 0.5rem !important;
}

/* ---- AVATAR FIXES ---- */
/* Make avatars square */
.rounded-circle, 
.avatar, 
img.avatar, 
.nav-avatar, 
.nav-avatar img,
.avatar-placeholder {
    border-radius: 0.25rem !important;
}

/* Square avatar containers */
.nav-avatar {
    border-radius: 0.25rem !important;
    overflow: hidden !important;
    width: 22px !important;
    height: 22px !important;
    min-width: 22px !important;
    min-height: 22px !important;
}

/* ---- COMMENT LAYOUTS ---- */
/* Fix comment layout */
.comment-item,
.comment-item .d-flex,
.comment-wrapper,
.comment-item .mobile-stack {
    display: flex !important;
    flex-direction: row !important;
    width: 100% !important;
}

.comment-item .vote-column,
.comment-item .vote-controls,
.nested-reply .vote-column,
.nested-reply .vote-controls {
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
    min-width: 36px !important;
    max-width: 36px !important;
    width: 36px !important;
    margin-right: 0.5rem !important;
}

.comment-item .comment-content-column,
.nested-reply .reply-content-column {
    flex: 1 !important;
    width: calc(100% - 36px) !important;
}

.comment-item .vote-btn i.bi,
.nested-reply .vote-btn i.bi {
    font-size: 1.2rem !important;
}

/* Comment action buttons */
.comment-actions .btn,
.reply-actions .btn {
    padding: 0.15rem 0.3rem !important;
    font-size: 0.75rem !important;
    height: 24px !important;
    min-height: 24px !important;
    line-height: 1 !important;
    display: inline-flex !important;
    align-items: center !important;
}

/* Fix nested comments */
.nested-reply {
    display: flex !important;
    flex-direction: row !important;
    padding-top: 0.35rem !important;
    padding-bottom: 0.35rem !important;
    border-bottom-color: var(--dark-border) !important;
    position: relative !important;
}

/* Author section in comments */
.comment-meta,
.reply-meta {
    display: flex !important;
    align-items: center !important;
    flex-wrap: wrap !important;
}

.avatar {
    width: 22px !important;
    height: 22px !important;
    object-fit: cover !important;
}

/* ---- GENERAL COMPACT UI ---- */
/* Better button sizing */
.btn {
    padding: 0.2rem 0.4rem !important;
    font-size: 0.8rem !important;
    min-height: 28px !important;
}

.btn-sm {
    padding: 0.1rem 0.3rem !important;
    font-size: 0.75rem !important;
    min-height: 24px !important;
}

/* Tighter spacing for elements */
.mt-3 {
    margin-top: 0.75rem !important;
}

.mb-3 {
    margin-bottom: 0.75rem !important;
}

.p-3 {
    padding: 0.75rem !important;
}

/* Reduce all HTML elements for mobile */
@media (max-width: 768px) {
    h1 { font-size: 1.4rem !important; }
    h2 { font-size: 1.3rem !important; }
    h3 { font-size: 1.2rem !important; }
    h4 { font-size: 1.1rem !important; }
    h5 { font-size: 1rem !important; }
    
    /* Force all post items to have correct layout */
    .post-item, 
    .mobile-stack,
    .d-flex {
        display: flex !important;
        flex-direction: row !important;
    }
    
    .post-item .vote-column,
    .post-item .vote-controls,
    .vote-controls {
        display: flex !important;
        flex-direction: column !important;
        margin-right: 0.5rem !important;
        min-width: 30px !important;
        align-items: center !important;
    }
    
    /* Override the mobile-stack class for posts */
    .mobile-stack.vote-controls {
        flex-direction: column !important;
    }
}
